<html>

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Alice&family=Cormorant:wght@300&family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <style>
        *{
            font-family: Alice;
        }
        .manage-user {
            display: none;
        }

        .pop-manage-user {
            display: block;
        }

        .manage-topic-managers {
            display: none;
        }

        .pop-manage-topic-managers {
            display: block;
        }

        .add-category {
            display: none;
        }

        .pop-add-category {
            display: block;
        }

        .navbar {
            box-shadow: 0 0 3px #79bee0 !important;
            color: black !important;
        }

        .navbar a {
            color: black !important;
            font-size: 20px;
        }

        .nav-link {
            cursor: pointer !important;
        }

        .navbar-brand {
            cursor: pointer !important;
        }

        table {
            border-collapse: collapse;
            width: 100%;
        }

        th,
        td {
            padding: 15px;
            text-align: left;
            text-align: center;
        }

        th {
            background-color: #f2f2f2;
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        tr:hover {
            background-color: #f1f1f1;
        }

        /* Remove borders */
        table,
        th,
        td {
            border: none;
        }

        .articles {
            padding: 20px;
            display: block;
            margin-left: auto;
            margin-right: auto;
            margin-top: 40px;
            height: auto;
            box-shadow: 0 0 1px #79bee0;
            width: 90%;
        }

        .pop-articles {
            display:block;

        }

        .close-articles {
            display: none;
        }

        .add-category{
            padding: 20px;
            margin-left: auto;
            margin-right: auto;
            margin-top: 40px;
            height: auto;
            width: 90%;
        }

        #category{
            border: none;
    border-bottom:1px solid #9dcde5;
    width: 300px;
    height: 40px;
    outline: none;
    margin-bottom: 20px;
        }

        /* .add-category button{
    width: 100px;
    height: 45px;
    border-radius: 10px;
    background-color: black;
    color: white;
    border: none;
    margin-top: 20px;
    font-size: 20px;
    margin-bottom: 10px;
    padding: 10px;
   
} */
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light" style="box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <div class="container-fluid">
            <a class="navbar-brand" onclick="openArticles();closeManageUsers();closeAddCategory();closeTopicManager();">Home</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup"
                aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav mx-auto">

                    <a class="nav-link" onclick="openTopicManager();closeManageUsers();closeAddCategory();closeArticles();">Manage-Topic-Managers</a>
                    <a class="nav-link" onclick="openManageUsers();closeTopicManager();closeAddCategory();closeArticles();">Manage-Users</a>
                    <a class="nav-link" onclick="openAddCategory();closeTopicManager();closeManageUsers();closeArticles();">Add-category
                    </a>
                    <a class="nav-link" href="/add_topicManager">Add-Topic-Manager </a>
                </div>
                <div class="navbar-nav ml-auto">
                    <a class="nav-link" href="/logout">Logout</a>
                </div>
            </div>
        </div>
    </nav>

    <% if (Message) { %>
        <div id="div">
            <h1>
                <%= Message %>
            </h1>
        </div>
        <% } %>
            <div id="add-category" class="add-category">
                <form action="/add_category" method="post">
                    <div>Add category </div>
                    <input type="text" name="category" id="category">
                   <div> <button>Add </button></div>
                </form>
            </div>
            <div class="manage-user" id="manage-user">
                <table>
                    <tr>
                        <th>SI NO</th>
                        <th>Email</th>
                        <th>Action</th>
                        <th></th>
                    </tr>
                    <% var i=1 %>
                        <% data.reverse().forEach(person=> { %>
                            <% if (person.privilege !=='admin' && person.privilege !=='topicManager' ) { %>
                                <% if (person.status===1) { %>
                                    <% status='reject' %>
                                        <% } else { %>
                                            <% status='accept' %>
                                                <% } %>
                                                    <tr>
                                                        <td>
                                                            <%= i++ %>
                                                        </td>
                                                        <td>
                                                            <%= person.email %>
                                                        </td>
                                                        <% if (status==='reject' ) { %>
                                                            <td>
                                                                <a href="/reject_user/<%= person._id %>">
                                                                    <button>
                                                                        <%= status %>
                                                                    </button>
                                                                </a>
                                                            </td>
                                                            <td>
                                                                <a href="/profile/<%= person._id %>">
                                                                    <button>view profile</button>
                                                                </a>
                                                            </td>
                                                            <% } else { %>
                                                                <td>
                                                                    <a href="/accept_user/<%= person._id %>">
                                                                        <button>
                                                                            <%= status %>
                                                                        </button>
                                                                    </a>
                                                                </td>
                                                                <td>
                                                                    <a href="/profile/<%= person._id %>">
                                                                        <button>view profile</button>
                                                                    </a>
                                                                </td>
                                                                <% } %>
                                                    </tr>
                                                    <% } %>
                                                        <% }) %>
                </table>
            </div>




            <div class="article-container">
                <div class="articles" id="articles">
                    <% var i=1 %>
                        <% article.reverse().forEach(articles=> { %>
                            <% data.reverse().forEach(person=> { %>
                                <% if (person._id==articles.id) { %>
                            <% if (person.status === 1 && articles.isAccepted === 1) { %>
                            <div style="margin: 10px;"></div>
                            <div style="margin: 10px;">
                                <h1>
                                    <%= articles.topic %>
                                </h1>
                            </div>
                            <div class="article-article" style="margin: 10px;">
                                <p style="display: inline;">
                                    <%= articles.article.substr(0,50) + "..." %>
                                  
                                </p><a style="display: inline;" href="/view_more/<%= articles._id %>">view more</a>
                            </div>
                          
                            
                                
                                    <div style="margin: 10px;">
                                        By <%= person.name %>
                                    </div>
                                    <% } %>
                                    <% } %>
                                 <% }); %>
                        <% }); %>
                </div>
            </div>


            <div class="manage-topic-managers" id="manage-topic-managers">
                <table>
                    <tr>
                        <th>SI NO</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Password</th>
                        <th>Action</th>
                        <th></th>
                    </tr>
                    <% var i=1 %>
                        <% data.reverse().forEach(person=> { %>
                            <% if(person.privilege !=='basic' && person.privilege !=='admin' ) { %>
                                <tr>
                                    <td>
                                        <%= i++ %>
                                    </td>
                                    <td>
                                        <%= person.name %>
                                    </td>
                                    <td>
                                        <%= person.email %>
                                    </td>
                                    <td>
                                        <%= person.password %>
                                    </td>



                                    <% if(person.status===2 ){ %>
                                        <td><a href="/reject_topicManager/<%= person._id %>"><button>Reject</button></a>
                                        </td>
                                        <% } else { %>
                                            <td><a
                                                    href="accept_topicManager/<%= person._id %>"><button>accept</button></a>
                                            </td>
                                            <% } %>
                                </tr>
                                <% } %>
                                    <% })%>
                </table>
            </div>



            <script>
                articles = document.getElementById('articles');
                openArticles = () => {
                    articles.classList.remove("close-articles");
                    articles.classList.add("pop-articles");
                }

                closeArticles = () => {
                    articles.classList.remove("pop-articles");
                    articles.classList.add("close-articles");

                }
                manageUsers = document.getElementById('manage-user');
                openManageUsers = () => {
                    manageUsers.classList.add("pop-manage-user");
                }
                closeManageUsers = () => {
                    manageUsers.classList.remove("pop-manage-user");
                }

                topicManager = document.getElementById('manage-topic-managers');
                openTopicManager = () => {
                    topicManager.classList.add("pop-manage-topic-managers");
                }
                closeTopicManager = () => {
                    topicManager.classList.remove("pop-manage-topic-managers");
                }
                addCategory = document.getElementById('add-category');
                openAddCategory = () => {
                    addCategory.classList.add("pop-add-category");
                }
                closeAddCategory = () => {
                    addCategory.classList.remove("pop-add-category");
                }
            </script>
</body>

</html>